define("jquery/event/special/touch",["jquery","jquery/event/fix"],function(e){var t=e("html"),n="_specialTouchdrag",i="_specialTouchpinch",o="_specialTouchpinchInOut",a="_specialTouchswipe",r=function(){},s=function(){},l=function(e,t,n){return n&&Math.abs(e)<n?!1:e?e>=0?"in":"out":t},c=function(e,t,n){var i=Math.abs(e),o=Math.abs(t);return Math.abs(i-o)<=1||!(!n||i>n||o>n)?!1:i>o?0>e?"left":"right":0>t?"up":"down"},d=function(t,n){return(t[e.expando]||(t[e.expando]=++e.guid))+"."+(n.guid||(n.guid=++e.guid))},u=function(t,n){var i=3===t.nodeType?t.parentNode:t;return i===n||e.contains(n,i)},h=function(e,n,i,o,a){return h[a]=function(r){var s,l=r.touches,c="touchdrag"===e.type&&1===l.length&&u(r.originalTarget,i),d="touchpinch"===e.type&&2===l.length&&u(l[0].target,i)&&u(l[1].target,i);(c||d)&&(t.off("touchmove."+o,p[a]).off("touchend."+o,f[a]).off("touchcancel."+o,m[a]).on("touchmove."+o,p(e,n,i,o,a)).on("touchend."+o,f(e,n,i,o,a)).on("touchcancel."+o,m(e,n,i,o,a)),s=p[a],s.direction=!0,s.state="start",s.deltaT=r.timeStamp),c&&(s.startT=s.deltaT,s.startX=(s.deltaX=r.pageX)+0,s.startY=(s.deltaY=r.pageY)+0),d&&(s.delta=Math.sqrt(Math.pow(s.startX=(s.deltaX=Math.abs(l[0].pageX-l[1].pageX))+0,2)+Math.pow(s.startY=(s.deltaY=Math.abs(l[0].pageY-l[1].pageY))+0,2)),s.start=s.delta+0)},h[a]},p=function(e,t,n,i,o){return p[o]=function(i){var a,r,s,d,u,h,f,m=i.touches,g="touchdrag"===e.type,v="touchpinch"===e.type&&m.length>=2,b=p[o];g&&(a=i.dragState=b.state,r=i.dragDeltaT=-b.deltaT+(b.deltaT=i.timeStamp),s=i.dragDeltaX=-b.deltaX+(b.deltaX=i.pageX),d=i.dragDeltaY=-b.deltaY+(b.deltaY=i.pageY),u=i.dragDelta=Math.sqrt(Math.pow(s,2)+Math.pow(d,2)),f=b.direction,h=c(s,d)),v&&(i.pinchState=b.state,i.pinchDeltaT=-b.deltaT+(b.deltaT=i.timeStamp),i.pinchDeltaX=-b.deltaX+(b.deltaX=s=Math.abs(m[0].pageX-m[1].pageX)),i.pinchDeltaY=-b.deltaY+(b.deltaY=d=Math.abs(m[0].pageY-m[1].pageY)),i.pinchDelta=-b.delta+(b.delta=u=Math.sqrt(Math.pow(s,2)+Math.pow(d,2))),h=l(i.pinchDelta,f=b.direction)),(g||v)&&(i.type=e.type,i.target=n,i.data=e.data,b.state="while",b.direction=h&&f?f!==!0?h===f?h:!1:h:f,t.apply(n,arguments))},p[o]},f=function(n,i,r,s,d){return f[d]=function(u){if(p[d]){t.off("touchmove."+s,p[d]).off("touchend."+s,f[d]).off("touchcancel."+s,m[d]);var h,g,v,b,y,E,C="touchdrag"===n.type&&/^touch(end|cancel|drag)$/.test(u.type),T="touchpinch"===n.type&&/^touch(end|cancel)$/.test(u.type),I=p[d];delete p[d],delete f[d],delete m[d],C&&(u.dragState=I.state="stop",u.dragDeltaT=-I.deltaT+u.timeStamp,u.dragDeltaX=0,u.dragDeltaY=0,u.dragDelta=0),T&&(u.pinchState=I.state="stop",u.pinchDeltaT=-I.deltaT+u.timeStamp,u.pinchDeltaX=0,u.pinchDeltaY=0,u.pinchDelta=0),(C||T)&&(u.type=n.type,u.target=r,u.data=n.data,i.apply(r,arguments)),C&&s===a&&(delete u.dragState,h=u.dragDeltaT=-I.startT+u.timeStamp,g=u.dragDeltaX=-I.startX+I.deltaX,v=u.dragDeltaY=-I.startY+I.deltaY,E=I.direction,y=c(g,v,20),y&&E===y&&(u.type="touchswipe"+y,e(r).trigger(u))),T&&s===o&&(delete u.pinchState,h=u.pinchDeltaT=-I.startT+u.timeStamp,g=u.pinchDeltaX=-I.startX+I.deltaX,v=u.pinchDeltaY=-I.startY+I.deltaY,b=u.pinchDelta=-I.start+I.delta,y=l(b,E=I.direction,80),y&&E===y&&(u.type="touchpinch"+y,e(r).trigger(u)))}},f[d]},m=f;e.each({touchdrag:n,touchpinch:i},function(n,i){e.event.special[n]={setup:e.noop,add:function(t){var n=d(this,t);i=t.namespace===a?a:t.namespace===o?o:i,e(this).on("touchstart."+i,h(t,t.handler,this,i,n))},remove:function(n){var r=d(this,n);i=n.namespace===a?a:n.namespace===o?o:i,e(this).off("touchstart."+i,h[r]),delete h[r],t.off("touchmove."+i,p[r]),delete p[r],t.off("touchend."+i,f[r]),delete f[r],t.off("touchcancel."+i,m[r]),delete m[r]}}}),e.each({"in":o,out:o},function(t,n){e.event.special["touchpinch"+t]={setup:e.noop,add:function(){h[d(this,r)]||e(this).on("touchpinch."+n,r)}}}),e.each({up:a,right:a,down:a,left:a},function(t,n){e.event.special["touchswipe"+t]={setup:e.noop,add:function(){h[d(this,s)]||e(this).on("touchdrag."+n,s)}}});var g={},v="State DeltaT DeltaX DeltaY Delta".split(" ");return e.event.special.touchzoom={setup:e.noop,add:function(t){e(this).on("touchpinch."+i,g[d(this,t)]=function(e){for(var n=0,i=v.length;i>n;n++)e["zoom"+v[n]]=e["pinch"+v[n]],delete e["pinch"+v[n]];e.type="touchzoom",t.handler.apply(this,arguments)})},remove:function(t){var n=d(this,t);e(this).off("touchpinch."+i,g[n]),delete g[n]}},e});
//@ sourceMappingURL=touch.js.map